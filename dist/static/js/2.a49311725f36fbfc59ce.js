webpackJsonp([2],{"9cIF":function(t,e,n){"use strict";e.b=function(t){var e=i()({},s.b,{g_tk:5381,loginUin:0,hostUin:0,format:"json",platform:"yqq.json",needNewCode:0,uin:0,cid:205361747,data:{req:{module:"CDN.SrfCdnDispatchServer",method:"GetCdnDispatch",param:{guid:"2090286744",calltype:0,userip:""}},req_0:{module:"vkey.GetVkeyServer",method:"CgiGetVkey",param:{guid:"2090286744",songmid:[t],songtype:[0],uin:"0",loginflag:1,platform:"20"}},comm:{uin:0,format:"json",ct:24,cv:0}}});return l.a.get("/api/musicVkey",{params:e}).then(function(t){return o.a.resolve(t.data)})},e.a=function(t){var e=i()({},s.b,{songmid:t,platform:"yqq",hostUin:0,needNewCode:0,categoryId:1e7,pcachetime:+new Date,format:"json"});return l.a.get("/api/lyric",{params:e}).then(function(t){return o.a.resolve(t.data)})};var r=n("rVsN"),o=n.n(r),a=n("aA9S"),i=n.n(a),s=n("T452"),c=n("aozt"),l=n.n(c)},BvhE:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){module.exports=e(t)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(t){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),e>=2?"=":b64chars.charAt(n>>>6&63),e>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(e>>>10))+fromCharCode(56320+(1023&e));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,n=e%4,r=(e>0?b64tab[t.charAt(0)]<<18:0)|(e>1?b64tab[t.charAt(1)]<<12:0)|(e>2?b64tab[t.charAt(2)]<<6:0)|(e>3?b64tab[t.charAt(3)]:0),o=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return o.length-=[0,0,2,1][n],o.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(t){return encode(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}})}).call(exports,__webpack_require__("9AUj"))},PvFA:function(t,e,n){"use strict";e.b=function(t,e){return new d({id:t.songid,mid:t.songmid,singer:g(t.singer),name:t.songname,album:t.albumname,duration:t.interval,image:"https://y.gtimg.cn/music/photo_new/T002R300x300M000"+t.albummid+".jpg?max_age=2592000",url:"http://dl.stream.qqmusic.qq.com/"+e})},e.a=function(t,e){return new d({id:t.id,mid:t.mid,singer:g(t.singer),name:t.name,album:t.album.name,duration:t.interval,image:"https://y.gtimg.cn/music/photo_new/T002R300x300M000"+t.album.mid+".jpg?max_age=2592000",url:"http://dl.stream.qqmusic.qq.com/"+e})};var r=n("rVsN"),o=n.n(r),a=n("AA3o"),i=n.n(a),s=n("xSur"),c=n.n(s),l=n("9cIF"),u=n("T452"),f=n("BvhE"),d=(n.n(f),function(){function t(e){var n=e.id,r=e.mid,o=e.singer,a=e.name,s=e.album,c=e.duration,l=e.image,u=e.url;i()(this,t),this.id=n,this.mid=r,this.singer=o,this.name=a,this.album=s,this.duration=c,this.image=l,this.url=u}return c()(t,[{key:"getLyric",value:function(){var t=this;return this.lyric?o.a.resolve(this.lyric):new o.a(function(e,n){Object(l.a)(t.mid).then(function(r){r.retcode===u.a?(t.lyric=f.Base64.decode(r.lyric),e(t.lyric)):n("no lyric")})})}}]),t}());function g(t){var e=[];return t?(t.forEach(function(t){e.push(t.name)}),e.join("/")):""}},Y3tJ:function(t,e){},kvay:function(t,e,n){"use strict";var r=n("4YfN"),o=n.n(r),a=n("qwAB"),i={props:{songs:{type:Array,default:function(){return[]}},rank:{type:Boolean,default:!1}},methods:{selectItem:function(t,e){this.$emit("select",t,e)},getDesc:function(t){return t.singer+"·"+t.album},getRankCls:function(t){return t<=2?"icon icon"+t:"text"},getRankText:function(t){if(t>2)return t+1}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-list"},[n("ul",t._l(t.songs,function(e,r){return n("li",{key:r,staticClass:"item",on:{click:function(n){return t.selectItem(e,r)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.rank,expression:"rank"}],staticClass:"rank"},[n("span",{class:t.getRankCls(r),domProps:{textContent:t._s(t.getRankText(r))}})]),t._v(" "),n("div",{staticClass:"content"},[n("h2",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.getDesc(e)))])])])}),0)])},staticRenderFns:[]};var c=n("C7Lr")(i,s,!1,function(t){n("vqpf")},"data-v-c0f1e9d6",null).exports,l=n("y/jF"),u=n("2bvH"),f={mixins:[n("F4+m").a],props:{title:{type:String,default:""},bgImage:{type:String,default:""},songs:{type:Array,default:function(){return[]}}},data:function(){return{scrollY:0}},computed:{bgStyle:function(){return{backgroundImage:"url("+this.bgImage+")"}}},created:function(){this.probeType=3,this.listenScroll=!0},mounted:function(){this.imageHeight=this.$refs.bgImage.clientHeight,this.minScrollHeight=40-this.imageHeight,this.$refs.list.$el.style.top=this.imageHeight+"px"},components:{Scroll:a.a,SongList:c,Loading:l.a},methods:o()({handlePlaylist:function(t){var e=t.length>0?"60px":"0";this.$refs.list.$el.style.bottom=e,this.$refs.list.refresh(),console.log("handlePlaylist",e)},back:function(){this.$router.back()},setRandomPlay:function(){this.randomPlay({list:this.songs})},scroll:function(t){this.scrollY=t.y,console.log(this.scrollY)},select:function(t,e){console.log(e),this.selectPlay({list:this.songs,index:e})}},Object(u.b)(["selectPlay","randomPlay"])),watch:{scrollY:function(t){var e=0,n=1,r=0,o=Math.max(this.minScrollHeight,t);this.$refs.layer.style.transform="translate3d(0,"+o+"px,0)",this.$refs.layer.style.webkitTransform="translate3d(0,"+o+"px,0)";var a=Math.abs(t)/this.imageHeight;t>0?(e=10,n=1+a):r=Math.min(20*a,20),this.$refs.filter.style.backdrop="blur("+r+"px)",t<o?(e=10,this.$refs.bgImage.style.paddingTop=0,this.$refs.bgImage.style.height="40px",this.$refs.playBtn.style.display="none"):(this.$refs.bgImage.style.paddingTop="70%",this.$refs.bgImage.style.height="0",this.$refs.playBtn.style.display=""),this.$refs.bgImage.style.zIndex=e,this.$refs.bgImage.style.transform="scale("+n+")"}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"music-list"},[n("div",{staticClass:"back",on:{click:t.back}},[n("i",{staticClass:"icon-back"})]),t._v(" "),n("h1",{staticClass:"title",domProps:{innerHTML:t._s(t.title)}}),t._v(" "),n("div",{ref:"bgImage",staticClass:"bg-image",style:t.bgStyle},[n("div",{staticClass:"play-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.songs.length>0,expression:"songs.length>0"}],ref:"playBtn",staticClass:"play",on:{click:t.setRandomPlay}},[n("i",{staticClass:"icon-play"}),t._v(" "),n("span",{staticClass:"text"},[t._v("随机播放全部")])])]),t._v(" "),n("div",{ref:"filter",staticClass:"filter"})]),t._v(" "),n("div",{ref:"layer",staticClass:"bg-layer"}),t._v(" "),n("scroll",{ref:"list",staticClass:"list",attrs:{data:t.songs,probeType:t.probeType,listenScroll:t.listenScroll},on:{scroll:t.scroll}},[n("div",[n("song-list",{attrs:{songs:t.songs},on:{select:t.select}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.songs.length,expression:"!songs.length"}],staticClass:"loading-container"},[n("loading")],1)])],1)},staticRenderFns:[]};var g=n("C7Lr")(f,d,!1,function(t){n("xY3I")},null,null);e.a=g.exports},lEJ1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("rVsN"),o=n.n(r),a=n("4YfN"),i=n.n(a),s=n("2bvH"),c=n("Sgn/"),l=n("9cIF"),u=n("PvFA"),f=n("T452"),d=n("kvay"),g={data:function(){return{song:[],count:0}},created:function(){this._getSingerDetail()},computed:i()({},Object(s.c)(["singer"]),{title:function(){return this.singer.name},bgImage:function(){return this.singer.avatar}}),methods:{_getSingerDetail:function(){var t=this;this.singer.id?Object(c.a)(this.singer.id).then(function(e){f.a===e.code&&(t.song=t.handleData(e.data.list))}):this.$router.push("/singer")},handleData:function(t){var e=[];this.len=t.length;var n=[],r=t.map(function(t){var e=t.musicData;return n.push(e),Object(l.b)(e.songmid)});return o.a.all(r).then(function(t){console.log(t),t.forEach(function(t,r){var o=t.req_0.data.midurlinfo[0].purl;e.push(Object(u.b)(n[r],o))})}).catch(function(t){}),e}},components:{MusicList:d.a}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"slide"}},[e("music-list",{attrs:{title:this.title,"bg-image":this.bgImage,songs:this.song}})],1)},staticRenderFns:[]};var m=n("C7Lr")(g,h,!1,function(t){n("Y3tJ")},null,null);e.default=m.exports},vqpf:function(t,e){},xSur:function(t,e,n){"use strict";e.__esModule=!0;var r,o=n("liLe"),a=(r=o)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},xY3I:function(t,e){}});
//# sourceMappingURL=2.a49311725f36fbfc59ce.js.map